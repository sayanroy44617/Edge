version: '3.9'

services:
  central-server:
    container_name: central-server
    image: central-server:latest
    build:
      context: ./central-server
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    volumes:
      - ./central-server/data:/app/data
    environment:
      - DB_PATH=app/data/nodes.db

  edge-node:
    container_name: edge-node
    image: edge-node:latest
    build:
      context: ./edge-node
      dockerfile: Dockerfile
    environment:
      - CENTRAL_SERVER_URL=http://central-server:8000
    depends_on:
      - central-server
